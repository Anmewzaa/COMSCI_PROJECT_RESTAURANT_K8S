pipeline {
  agent any

  environment {
      HOST_NAME = 'asia-southeast1-docker.pkg.dev'
      PROJECT_ID = 'final-project-438910'
      REGISTRY_NAME = 'customer'
      IMAGE_NAME = 'dev'
  }

  stages {
    stage('Cleanup Workspace') {
      steps {
        cleanWs()
      }
    }
    stage('Git Check Out') {
      steps {
        checkout scmGit(branches: [[name: '*/dev']], extensions: [], userRemoteConfigs: [[credentialsId: 'GITHUB_TOKEN', url: 'https://github.com/Anmewzaa/COMSCI_PROJECT_RESTAURANT_APP_CUSTOMER']])
      }
    }
    stage('Dependency Check') {
      steps {
        dependencyCheck additionalArguments: ''' 
                      -o './'
                      -s './'
                      -f 'ALL' 
                      --prettyPrint''', odcInstallation: 'OWASP-CHECK'
        dependencyCheckPublisher pattern: 'dependency-check-report.xml'
      }
    }
  }
}